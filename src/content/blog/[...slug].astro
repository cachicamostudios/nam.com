---
import { getCollection, render } from "astro:content";
import Base from "../../layouts/Base.astro";

export async function getStaticPaths() {
  const posts = await getCollection("blog");
  return posts.map((post) => ({
    params: { slug: post.id },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await render(post);
---

<Base title={`${post.data.title} ‚Äì √±am.com`}>
  <a href="/" style="text-decoration:none; font-weight:700;">‚Üê Volver</a>
  <h1>{post.data.title}</h1>
  <p class="post-date">{post.data.pubDate.toLocaleDateString("es-ES", { year: "numeric", month: "long", day: "numeric" })}</p>
  <article>
    <Content />
  </article>
  {post.data.galeria && (
    <a href={`/galeria/${post.data.galeria}`} class="btn-galeria">
      üì∑ Ver galer√≠a
    </a>
  )}
</Base>

<style>
  .post-date {
    color: #888;
    font-size: 0.95rem;
    margin-bottom: 1.5rem;
  }
  .btn-galeria {
    display: inline-block;
    margin-top: 2rem;
    padding: 0.8rem 1.6rem;
    background: var(--fg, #111);
    color: var(--bg, #fff);
    font-weight: 800;
    font-size: 1rem;
    border-radius: 0.7rem;
    text-decoration: none;
    box-shadow: 4px 4px 0 #888;
    transition: box-shadow 0.15s;
  }
  .btn-galeria:hover {
    box-shadow: 2px 2px 0 #888;
  }
</style>
